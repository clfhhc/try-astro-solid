import{o as T,f as y,i as x,t as k}from"./chunks/chunk.303d5ee9.js";function g(e){return{subscribe(r){let t;const{next:i,error:l,complete:a}=r.next?r:{next:r};return e(0,(c,n)=>{try{c===0&&(t=n),c===1&&i&&i(n),c===2&&n&&l?l(n):c===2&&a&&(a(),t=void 0)}catch(u){l&&l(u)}}),function(){t&&t(2)}}}}const b=0,h=1,p=2,m=(e,r)=>e==="active"?!0:(console.error(`This callbag source ${e==="disposed"?"was previously disposed":e==="ended"?"has previously ended":"has not been started"}, but '${r}' was invoked.`),!1),$=(e,r)=>e!=="active"?!0:(console.error(`This callbag source is already active, but '${r}' was invoked.`),!1),A=e=>(...r)=>{if(r[0]!==b)return;let t="inactive";const i=()=>t!=="disposed"&&(t="disposed");let l=!1;const a=(...s)=>{t!=="disposed"&&(l?o&&s[0]===h?o():s[0]===p&&i()&&u?.():l=s)},c=r[1],n=e({start:()=>{!$(t,"start")||(c(b,a),t="active")},next:s=>{!m(t,"next")||c(h,s)},error:s=>{m(t,"error"),c(p,s),t="ended"},complete:()=>{m(t,"complete"),c(p),t="ended"}}),u=typeof n=="function"?n:n?.stop,o=typeof n=="object"?n?.pull:void 0;l&&a(...l),l=!0};function S({wordPointer:e,length:r,random:t}){let i=e;if(t)for(;i===e;)i=Math.floor(Math.random()*r);else i=(e+1)%r;return i}function w({words:e,typeDuration:r=80,showDuration:t=3e3,random:i=!1}){return A(({next:l,start:a,complete:c})=>{a();const{length:n}=e;if(!e.length){l(""),c();return}let u=0,o=e[0].length,s=!0,f;const d=()=>{l(e[u].slice(0,o));let v=r;s&&o===0?(u=S({wordPointer:u,length:n,random:i}),o+=1):s&&o>0&&o<e[u].length?o+=1:s&&o===e[u].length?(v=t,s=!1,o-=1):!s&&o>1?o-=1:!s&&o===1&&(o-=1,s=!0),f&&clearTimeout(f),f=setTimeout(d,v)};return d(),{pull:()=>{d()},stop:()=>{clearTimeout(f)}}})}const D=k("<span></span>");function M({words:e,random:r}){const t=T(g(w({words:e,random:r})));return(()=>{const i=y(D);return x(i,()=>t()||"\u200B"),i})()}export{M as default};
